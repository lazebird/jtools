var d=Object.defineProperty,_=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var l=(e,t,o)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,c=(e,t)=>{for(var o in t||(t={}))f.call(t,o)&&l(e,o,t[o]);if(p)for(var o of p(t))m.call(t,o)&&l(e,o,t[o]);return e},i=(e,t)=>_(e,g(t));import{a as ref,o as openBlock,b as createElementBlock,f as createVNode,w as withCtx,d as createBaseVNode,q as Form,i as unref,U as UploadOutlined,N as CopyOutlined,s as createCommentVNode,h as createTextVNode,t as toDisplayString,v as UploadDragger,_ as __unplugin_components_2,x as __unplugin_components_3,y as __unplugin_components_4}from"./vendor.58b05717.js";/* empty css              *//* empty css               *//* empty css               */import{c as custom_upload}from"./strUtils.1410245a.js";import configVue from"./config.d0942c0f.js";import{b as basename}from"./path.215fc192.js";/* empty css               */import"./index.1970a975.js";const _hoisted_1={class:"page"},_hoisted_2=createBaseVNode("br",null,null,-1),_hoisted_3=createBaseVNode("p",null,"Click or drag file to this area to upload",-1),_sfc_main={setup(__props){const data=ref(""),postUris=ref(""),def_grp2code=(e,t)=>"export const "+e.toUpperCase()+"URI = "+JSON.stringify(t,null,4)+`;

`,conf=ref({ign_deprecated:!0,grp_name:"x-apifox-folder",grp2code:def_grp2code.toString()});let g_paths=ref({}),g_uris=ref([]),g_grps=ref({});function paths2uris(e){var o,r,n;let t=[];for(const a in e)conf.value.ign_deprecated&&(!e[a].get||e[a].get.deprecated)&&(!e[a].post||e[a].post.deprecated)||t.push({name:basename(a),path:a,group:(n=(o=e[a].get)==null?void 0:o[conf.value.grp_name])!=null?n:(r=e[a].post)==null?void 0:r[conf.value.grp_name],post_flag:!!e[a].post});return t}async function handleRequest(info){let paths={};await custom_upload(info,e=>{var t;return paths=(t=JSON.parse(e).paths)!=null?t:{}});const uris=paths2uris(paths).sort((e,t)=>e.path.localeCompare(t.path));let grps={};for(const e of uris)grps[e.group]=i(c({},grps[e.group]),{[e.name]:e.path});let code="",grp2code=conf.value.grp2code?eval(conf.value.grp2code):def_grp2code;for(const e in grps)code+=grp2code(e,grps[e]);data.value=code;const postUrisgrps=uris.filter(e=>e.post_flag).map(e=>e.group.toUpperCase()+"URI."+e.name);code="";for(const e of postUrisgrps.sort())code+=e+`,
`;postUris.value=code,g_paths.value=paths,g_uris.value=uris,g_grps.value=grps}const copy=e=>{var t;return(t=navigator.clipboard)==null?void 0:t.writeText(e)};return(e,t)=>{const o=UploadDragger,r=__unplugin_components_2,n=__unplugin_components_3,a=__unplugin_components_4,u=Form;return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(configVue,{conf:conf.value},null,8,["conf"]),_hoisted_2,createVNode(u,{"label-col":{span:8},"wrapper-col":{span:16}},{default:withCtx(()=>[createVNode(r,{label:"JSON File",wrapperCol:{span:8}},{default:withCtx(()=>[createVNode(o,{accept:".txt, .json, text/plain",customRequest:handleRequest,maxCount:1},{default:withCtx(()=>[createVNode(unref(UploadOutlined)),_hoisted_3]),_:1})]),_:1}),createVNode(a,null,{default:withCtx(()=>[createVNode(n,{span:12},{default:withCtx(()=>[createVNode(r,{label:"Result"},{default:withCtx(()=>[data.value.length?(openBlock(),createElementBlock("a",{key:0,onClick:t[0]||(t[0]=s=>copy(data.value))},[createVNode(unref(CopyOutlined))])):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString("paths "+Object.keys(unref(g_paths)).length+", uris "+unref(g_uris).length+", grps "+Object.keys(unref(g_grps)).length)+" ",1),createBaseVNode("pre",null,toDisplayString(data.value)+" ",1)]),_:1})]),_:1}),createVNode(n,{span:12},{default:withCtx(()=>[createVNode(r,{label:"postUris"},{default:withCtx(()=>[postUris.value.length?(openBlock(),createElementBlock("a",{key:0,onClick:t[1]||(t[1]=s=>copy(postUris.value))},[createVNode(unref(CopyOutlined))])):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString("postUris "+unref(g_uris).filter(s=>s.post_flag).length),1),createBaseVNode("pre",null,toDisplayString(postUris.value)+" ",1)]),_:1})]),_:1})]),_:1})]),_:1})])}}};export{_sfc_main as default};
