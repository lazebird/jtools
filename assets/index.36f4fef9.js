import{_ as _export_sfc,f as ref,o as openBlock,c as createElementBlock,d as createVNode,w as withCtx,a as createBaseVNode,g as Form,u as unref,E as CopyOutlined,i as createCommentVNode,b as createTextVNode,t as toDisplayString,U as UploadDragger,j as __unplugin_components_2,k as __unplugin_components_3,l as __unplugin_components_4}from"./index.8667b681.js";/* empty css              *//* empty css               *//* empty css               */import{U as UploadOutlined,c as custom_upload}from"./strUtils.f536769b.js";import configVue from"./config.510b1de8.js";import{b as basename}from"./path.215fc192.js";/* empty css               */const _hoisted_1={class:"page"},_hoisted_2=createBaseVNode("br",null,null,-1),_hoisted_3=createBaseVNode("p",null,"Click or drag file to this area to upload",-1),_sfc_main={__name:"index",setup(__props){const data=ref(""),postUris=ref(""),def_grp2code=(e,t)=>"export const "+e.toUpperCase()+"URI = "+JSON.stringify(t,null,4)+`;

`,conf=ref({ign_deprecated:!0,grp_name:"x-apifox-folder",grp2code:def_grp2code.toString()});let g_paths=ref({}),g_uris=ref([]),g_grps=ref({});function paths2uris(e){var n,a,r;let t=[];for(const o in e)conf.value.ign_deprecated&&(!e[o].get||e[o].get.deprecated)&&(!e[o].post||e[o].post.deprecated)||t.push({name:basename(o),path:o,group:(r=(n=e[o].get)==null?void 0:n[conf.value.grp_name])!=null?r:(a=e[o].post)==null?void 0:a[conf.value.grp_name],post_flag:!!e[o].post});return t}async function handleRequest(info){let paths={};await custom_upload(info,e=>{var t;return paths=(t=JSON.parse(e).paths)!=null?t:{}});const uris=paths2uris(paths).sort((e,t)=>e.path.localeCompare(t.path));let grps={};for(const e of uris)grps[e.group]={...grps[e.group],[e.name]:e.path};let code="",grp2code=conf.value.grp2code?eval(conf.value.grp2code):def_grp2code;for(const e in grps)code+=grp2code(e,grps[e]);data.value=code;const postUrisgrps=uris.filter(e=>e.post_flag).map(e=>e.group.toUpperCase()+"URI."+e.name);code="";for(const e of postUrisgrps.sort())code+=e+`,
`;postUris.value=code,g_paths.value=paths,g_uris.value=uris,g_grps.value=grps}const copy=e=>{var t;return(t=navigator.clipboard)==null?void 0:t.writeText(e)};return(e,t)=>{const n=UploadDragger,a=__unplugin_components_2,r=__unplugin_components_3,o=__unplugin_components_4,p=Form;return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(configVue,{conf:conf.value},null,8,["conf"]),_hoisted_2,createVNode(p,{"label-col":{span:8},"wrapper-col":{span:16}},{default:withCtx(()=>[createVNode(a,{label:"JSON File",wrapperCol:{span:8}},{default:withCtx(()=>[createVNode(n,{accept:".txt, .json, text/plain",customRequest:handleRequest,maxCount:1},{default:withCtx(()=>[createVNode(unref(UploadOutlined)),_hoisted_3]),_:1})]),_:1}),createVNode(o,null,{default:withCtx(()=>[createVNode(r,{span:12},{default:withCtx(()=>[createVNode(a,{label:"Result"},{default:withCtx(()=>[data.value.length?(openBlock(),createElementBlock("a",{key:0,onClick:t[0]||(t[0]=s=>copy(data.value))},[createVNode(unref(CopyOutlined))])):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString("paths "+Object.keys(unref(g_paths)).length+", uris "+unref(g_uris).length+", grps "+Object.keys(unref(g_grps)).length)+" ",1),createBaseVNode("pre",null,toDisplayString(data.value)+" ",1)]),_:1})]),_:1}),createVNode(r,{span:12},{default:withCtx(()=>[createVNode(a,{label:"postUris"},{default:withCtx(()=>[postUris.value.length?(openBlock(),createElementBlock("a",{key:0,onClick:t[1]||(t[1]=s=>copy(postUris.value))},[createVNode(unref(CopyOutlined))])):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString("postUris "+unref(g_uris).filter(s=>s.post_flag).length),1),createBaseVNode("pre",null,toDisplayString(postUris.value)+" ",1)]),_:1})]),_:1})]),_:1})]),_:1})])}}};var index=_export_sfc(_sfc_main,[["__file","/home/runner/work/jtools/jtools/src/views/uriHelper/index.vue"]]);export{index as default};
